<!doctype html> <html> <head> <title>Bikeshed Illusion</title> <script src="../lib/raphael/raphael-min.js"></script> <script src="../lib/bikeshed.js"></script> <style type="text/css"> body, html { margin: 0; font-family: sans-serif; font-size: 14px; } #bs { width: 548px; height: 411px; } body { background:#fff; margin:0; } </style> </head> <body onload="loaded()"> <div id='ruler' style="width: 548px; height: 100px; position: absolute; z-index: 100; border: 1px solid black; border-left: none; border-right: none; opacity: 0; -webkit-transition: opacity 0.5s linear; pointer-events: none;"></div> <div id='bs'></div> <script> function loaded() { var ruler = document.getElementById("ruler"), demo = document.getElementById("bs"), timeout; demo.addEventListener("mousemove", function(e) { if (!e) var e = window.event; var relTarg = e.relatedTarget || e.fromElement; clearTimeout(timeout); ruler.style.top = e.layerY+"px"; ruler.style.opacity = 1; timeout = setTimeout(function() { ruler.style.opacity = 0; }, 1500); }, false); demo.addEventListener("touchmove", function(e) { if (!e) var e = window.event; var relTarg = e.relatedTarget || e.fromElement; ruler.style.top = e.layerY+"px"; ruler.style.opacity = 1; e.preventDefault(); e.stopPropagation(); }, false); demo.addEventListener("touchend", function(e) { ruler.style.opacity = 0; }, false); var stageNode = document.getElementById('bs'); var opts = { width: stageNode.width, height: stageNode.height }; stageNode.style.width = opts.width + 'px'; stageNode.style.height = opts.height + 'px'; setTimeout(function() { bikeshed.load(stageNode, 'perspective.js' + '?' + (+new Date), opts); }, 0); } </script> </body> </html> 