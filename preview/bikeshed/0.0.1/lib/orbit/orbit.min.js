;(function(){'use strict';function v(a,b){var c=a.elementId,d=a.bikeshed,g=a.submovieLoaderUrl;this.baseUrl=a.baseUrl;this.options=w({},this.defaultOptions,b);c=document.getElementById(c);c.innerHTML="";this.movie=d.run(c,g,this.options);console.log("Player running using "+env+" environment.")}function D(a){var b=document.createElement("a");b.href=a;return b.href}function x(a,b){b=b||{};this.baseUrl=b.baseUrl||"";var c=this,d=document.createElement("script");d.src=this.baseUrl+"/movie_list.js";d.onload=function(){c.init(a)};
document.getElementsByTagName("head")[0].appendChild(d)}function y(a){this.editor=a}function z(a){this.editor=window.ace.edit(a);this.setEditorContent(A);this.editor.getSession().setMode("ace/mode/javascript");this.editor.getSession().setTabSize(2);this.editor.getSession().setUseSoftTabs(!0);(new E(this.editor)).connectKeyboardShortcuts();var b=this;this.content="";this.contentChangeTimer=null;this.editor.getSession().on("change",function(){clearTimeout(b.contentChangeTimer);var a=b.editor.getSession().getValue();
a!==b.content&&(b.content=a,b.contentChangeTimer=setTimeout(function(){b.emit("update",b.editor.getSession().getValue())},500))})}function r(a){return[].slice.call(a)}function t(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function F(){4===l.readyState&&(200===l.status?B(l.responseText):alert("There was a problem with the request."))}var f={module$exports:{classes:{Shape:["arcBy","arcTo","lineTo","moveTo"],filter:"Blur,Brightness,ColorMatrix,Contrast,DropShadow,Grayscale,HueRotate,Invert,Opacity,Saturate,Sepia".split(","),
Bitmap:["onload"]},methods:{Shape:"arc,circle,ellipse,rect,polygon,star".split(","),filter:"blur,brightness,colorMatrix,contrast,dropShadow,grayscale,hueRotate,invert,saturate,sepia".split(",")},constants:{colors:"aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,transparent,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen".split(","),
easing:"linear,quadIn,quadOut,quadInOut,cubicIn,cubicOut,cubicInOut,quartIn,quartOut,quartInOut,quintIn,quintOut,quintInOut,sineIn,sineOut,sineInOut,expoIn,expoOut,expoInOut,circIn,circOut,circInOut,backIn,backOut,backInOut,elasticIn,elasticOut,elasticInOut,bounceIn,bounceOut,bounceInOut".split(","),attrKeys:"easing,fillColor,fillGradient,filters,fontFamily,fontSize\u2122,lineColor,lineWidth,rotation,scale,textFillColor,textLineColor,x,y".split(",")}}};f.module$exports&&(f=f.module$exports);var j=
{},s=f;j.module$exports={complete:function(a){var a=this.getDetails(a),b=null;if(a){var c=a.objectName,d=a.methodName;a.isClass?s.classes.hasOwnProperty(c)&&(b=this.completeClass(c,d)):s.methods.hasOwnProperty(c)&&(b=this.completeMethod(c,d))}return b?b:""},completeMethod:function(a,b){var c=s.methods[a];if(!b)return c[0];for(var d=0,g=c.length;d<g;d++)if(0===c[d].indexOf(b))return c[d].substr(b.length)},completeClass:function(a,b){var c=s.classes[a];if(!b)return c[0];for(var d=0,g=c.length;d<g;d++)if(0===
c[d].indexOf(b))return c[d].substr(b.length)},getDetails:function(a){var b=a.match(/(new\s+)?[a-zA-Z.][a-zA-Z0-9.]+$/);if(b){var c=b[0],a=c.split(".").slice(-1)[0],c=c.substr(0,c.length-a.length-1);(b=!!b[1])&&(c=c.replace(/^new\s+/,""));return{objectName:c,methodName:a,isClass:b}}return null}};j.module$exports&&(j=j.module$exports);var h={},i=window.ace.require("ace/lib/event_emitter").EventEmitter;i.emit=i._emit;h.module$exports=i;h.module$exports&&(h=h.module$exports);var i={},w=function(a,b){var c,
d,g=arguments.length;for(c=1;c<g;c+=1)for(d in b=arguments[c]||{},b)a[d]=b[d];return a};v.prototype=w({movie:null,defaultOptions:{framerate:25,height:0,noCache:!0,width:0},load:function(a){"string"!==typeof a&&(a="");var b=this.movie;if(b.isRunnerListening)b.sendMessage({type:"baseUrl",baseUrl:this.baseUrl}),b.sendMessage({type:"code",code:a}),this.play(),this.emit("load");else{var c=this;setTimeout(function(){c.load(a)},125)}},pause:function(){this.movie.post("freeze");this.isPlaying=!1},play:function(){this.movie.post("unfreeze");
this.isPlaying=!0}},h);i.module$exports=v;i.module$exports&&(i=i.module$exports);var k={module$exports:{byId:function(a){return document.getElementById(a)},jsonp:function(a,b){var c=document.createElement("script");c.setAttribute("src",a+"?callback="+b);document.getElementsByTagName("head")[0].appendChild(c)},mixin:function(a,b){for(var c,d=0,g=arguments.length;++d<g;)for(c in b=arguments[d]||{},b)a[c]=b[c];return a},renderDropdown:function(a,b,c){var d='<select id="'+b+'">',g;for(g in a)b=a[g],d+=
'<optgroup label="'+g+'">',b.forEach(function(a){var b="";0<=a.indexOf(c)&&(b=' selected="'+c+'" ');d+=["<option",b,">",a,"</option>"].join("")}),d+="</optgroup>";return d+="</select>"},xhrGet:function(a,b){var c=new XMLHttpRequest;c.open("GET",a);c.send("");c.onload=function(){c=null;b(this.responseText)}}}};k.module$exports&&(k=k.module$exports);var p={},q=k,n=x.prototype={init:function(a){var b=q.renderDropdown(movieList,"examplesFilepicker");q.byId(a).innerHTML=b;var c=this;q.byId("examplesFilepicker").onchange=
function(a){c.loadFile(a)}},loadFile:function(a){var b=a.target&&a.target.value||a,a=D(this.baseUrl+"/"+b),c=this;q.xhrGet(a,function(a){c.emit("update",{filename:b,sourceCode:a})})}};q.mixin(n,h);p.module$exports=x;p.module$exports&&(p=p.module$exports);var n={},m=function(){var a=this,b=this.load();b&&setTimeout(function(){a.emit("startup",b)},16)},G=m.prototype={save:function(a){location.hash=encodeURIComponent(a)},load:function(){var a=location.hash&&location.hash.slice(1);try{return decodeURIComponent(a)}catch(b){return a}}};
k.mixin(G,h);n.module$exports=m;n.module$exports&&(n=n.module$exports);var m={},e=f;m.module$exports={increase:function(a){return""===a?a:-1!=e.methods.Shape.indexOf(a)?this._getNextInArray(e.methods.Shape,a):-1!=e.constants.colors.indexOf(a)?this._getNextInArray(e.constants.colors,a):-1!=e.constants.easing.indexOf(a)?this._getNextInArray(e.constants.easing,a):-1!=e.constants.attrKeys.indexOf(a)?this._getNextInArray(e.constants.attrKeys,a):-1!=e.methods.filter.indexOf(a)?this._getNextInArray(e.methods.filter,
a):-1!=e.classes.filter.indexOf(a)?this._getNextInArray(e.classes.filter,a):isNaN(a)?a:(parseInt(a)+1)%10},decrease:function(a){if(""===a)return a;if(-1!=e.methods.Shape.indexOf(a))return this._getPreviousInArray(e.methods.Shape,a);if(-1!=e.constants.colors.indexOf(a))return this._getPreviousInArray(e.constants.colors,a);if(-1!=e.constants.easing.indexOf(a))return this._getPreviousInArray(e.constants.easing,a);if(-1!=e.constants.attrKeys.indexOf(a))return this._getPreviousInArray(e.constants.attrKeys,
a);if(-1!=e.methods.filter.indexOf(a))return this._getPreviousInArray(e.methods.filter,a);if(-1!=e.classes.filter.indexOf(a))return this._getPreviousInArray(e.classes.filter,a);if(isNaN(a))return a;a=parseInt(a)-1;return-1==a?9:a},_getPreviousInArray:function(a,b){return a[(a.indexOf(b)-1+a.length)%a.length]},_getNextInArray:function(a,b){return a[(a.indexOf(b)+1)%a.length]}};m.module$exports&&(m=m.module$exports);var f={},C=m,H=j,I=window.ace.require("ace/range").Range,J=[{bindKey:{win:"Alt-Up",
mac:"Option-Up",sender:"editor"},methodName:"increaseValue"},{bindKey:{win:"Alt-Down",mac:"Option-Down",sender:"editor"},methodName:"decreaseValue"},{bindKey:{win:"Alt-Right",mac:"Option-Right",sender:"editor"},methodName:"autoComplete"}];y.prototype={connectKeyboardShortcuts:function(){J.forEach(this.connectKeyboardShortcut.bind(this))},connectKeyboardShortcut:function(a){this.editor.commands.addCommand({name:a.methodName,bindKey:a.bindKey,exec:this[a.methodName].bind(this)})},_modifyValue:function(a){var b=
this.editor.getCursorPosition(),c=this.editor.getSession(),d=c.getWordRange(b.row,b.column),g=c.getTextRange(d);isNaN(parseFloat(g))?c.replace(d,""+C[a](g)):(d=c.getLine(b.row).substr(b.column,1),g=new I(b.row,b.column,b.row,b.column+1),c.replace(g,""+C[a](d)));this.editor.moveCursorTo(b.row,b.column)},increaseValue:function(){this._modifyValue("increase")},decreaseValue:function(){this._modifyValue("decrease")},autoComplete:function(){var a=this.editor.getCursorPosition(),b=this.editor.getSession(),
c=b.getLine(a.row);a.column==c.length&&(c=H.complete(c.substr(0,a.column)),b.insert(a,c))}};f.module$exports=y;f.module$exports&&(f=f.module$exports);var j={},E=f,A='\n\nShape.rect(100,100,100,100)\n  .addTo(stage)\n  .attr({fillColor:"red"});',f=z.prototype={content:"",contentChangeTimer:null,load:function(a){this.setEditorContent(a)},setEditorContent:function(a){this.editor.getSession().setValue(a)},onContentChange:function(){for(var a=0;a<this.backends.length;a++)this.backends[a].save(this.content);
player.update(this.content)},loadContent:function(){for(var a,b=0;b<this.backends.length;b++)if(a=this.backends[b].load())return a;return A},restoreSession:function(){var a=this.loadContent();a&&this.setEditorContent(a)}};k.mixin(f,h);j.module$exports=z;j.module$exports&&(j=j.module$exports);var k={},o={hide:function(a){a.style.display="none"},show:function(a){a.style.display="block"},getPreviousNode:function(a,b){for(b=b.toLowerCase();a=a.previousSibling;)if(a.nodeName.toLowerCase()===b)return a;
return null}};k.module$exports={options:{showCodeOnly:!1,showH1:!0},init:function(a,b){this.container=a;this.content=b;this.container.innerHTML=this.parseHTMLFromMarkdown(b);this.nodes=r(this.container.children);r(this.container.querySelectorAll("pre")).forEach(function(a){a.dataset.actualInnerHtml=a.textContent})},parseHTMLFromMarkdown:function(a){return marked.parser(marked.lexer(a))},filter:function(a,b){var c=[],d=[],g=this;this.findCodeNodesWithString(a).forEach(function(a){c.push(a);g.options.showCodeOnly||
c.push(o.getPreviousNode(a,"p"));c.push(o.getPreviousNode(a,"h3"));c.push(o.getPreviousNode(a,"h2"));g.options.showH1&&c.push(o.getPreviousNode(a,"h1"));d.push(a)});var e=!!c.length;b&&!e&&(this.removeMarks(),this.nodes.forEach(o.show));if(e){this.removeMarks();for(var e=0,f=d.length;e<f;e++)g.markInNode(d[e],a);this.nodes.forEach(o.hide);c.forEach(o.show)}},removeMarks:function(){r(this.container.querySelectorAll("pre")).forEach(function(a){a.innerHTML=a.dataset.actualInnerHtml})},findCodeNodesWithString:function(a){var b=
this.container.querySelectorAll("pre"),c=this;return r(b).filter(function(b){return c.isInNode(a,b)})},isInNode:function(a,b){return-1<b.dataset.actualInnerHtml.toLowerCase().indexOf(a.toLowerCase())},markSearchString:function(a,b){if(!b)return a;var c=a,d=b.toLowerCase(),e=a.toLowerCase(),f=e.indexOf(d);-1!=f&&(c=t(a.substr(0,f))+"<mark>"+t(a.substr(f,b.length))+"</mark>",c=-1<e.substr(f+b.length).indexOf(d)?c+this.markSearchString(a.substr(f+b.length),b):c+t(a.substr(f+b.length)));return c},markInNode:function(a,
b){a.innerHTML=this.markSearchString(a.dataset.actualInnerHtml,b)}};k.module$exports&&(k=k.module$exports);var f={},l,B;f.module$exports={xhr:function(a,b){B=b;if(window.XMLHttpRequest)l=new XMLHttpRequest;else if(window.ActiveXObject)try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}}if(!l)return alert("Giving up :( Cannot create an XMLHTTP instance"),!1;l.onreadystatechange=F;l.open("GET",a);l.send()}};f.module$exports&&(f=f.module$exports);
var h={},K=j,L=i,M=n,N=p,O=f,u=k,i=window.Orbit=function(a,b){var c=this.editor=new K(a.elementId),d=new L(b,b.bikeshedOptions),e=new M,f=new N("fileContainer",b.exampleBackendOptions);c.on("update",function(a){d.load(a);e.save(a)});e.on("startup",function(a){/^.*\.js$/i.test(a)?f.loadFile(a):c.load(a)});f.on("update",function(a){c.load(a.sourceCode)});var h=document.getElementById("play-pause");d.on("load",function(){h.checked=!0});h.onchange=function(){d[this.checked?"play":"pause"]()};O.xhr("./cheatsheet/cheatsheet.md",
function(a){u.init(document.getElementById("cheatsheet-content"),a);u.options.showH1=!1});var k="";setInterval(function(){if(c){var a=c.editor.getCursorPosition(),b=c.editor.getSession(),a=b.getWordRange(a.row,a.column),b=b.getTextRange(a),a=b==parseInt(b);/\w/.test(b)&&k!=b&&!a&&u.filter(k=b)}},500);var j=document.querySelector("#cheatsheet-open"),i=document.querySelector("#cheatsheet-close"),l=document.querySelector("#editorNode"),m=document.querySelector("#cheatsheet");i.style.display="none";j.onclick=
function(){l.style.height="50%";m.style.display="block";j.style.display="none";i.style.display="block";c.editor.resize()};i.onclick=function(){l.style.height="100%";m.style.display="none";i.style.display="none";j.style.display="block";c.editor.resize()}};h.module$exports=i;h.module$exports&&(h=h.module$exports)})();
